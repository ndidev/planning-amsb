<!DOCTYPE html>
<html lang="fr" dir="ltr">
  <head>
    <title>Affrètement maritime - Ajout/Modification affrètement</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="../lib/auth-guard.js" type="module"></script>
    <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="./charter.css" />
    <script src="../lib/commun.js" type="module"></script>
    <script src="./charter.js" type="module"></script>
  </head>

  <body>
    <include src="../menu/menu.html">
      { "nouveau": { "rubrique": "chartering", "title": "Nouvel affrètement",
      "href": "./charter.html" } }
    </include>

    <main class="formulaire">
      <h1>Affrètement</h1>

      <form class="pure-form pure-form-aligned">
        <!-- Statut -->
        <div class="pure-control-group">
          <label for="statut">Statut</label>
          <select name="statut" id="statut">
            <option value="0">Plannifié (pas confirmé)</option>
            <option value="1">Confirmé par l'affréteur</option>
            <option value="2">Affrété</option>
            <option value="3">Chargement effectué</option>
            <option value="4">Voyage terminé</option>
          </select>
        </div>

        <!-- Archive -->
        <div class="pure-control-group">
          <label for="archive">Archive</label>
          <input type="checkbox" name="archive" id="archive" />
        </div>

        <!-- Navire -->
        <div class="pure-control-group">
          <label for="navire">Navire</label>
          <input
            name="navire"
            id="navire"
            placeholder="Nom du navire"
            value="TBN"
            maxlength="255"
            class="navire-armateur"
            data-nom="Navire"
            autocapitalize="characters"
          />
        </div>

        <!-- Affréteur -->
        <div class="pure-control-group">
          <label for="affreteur_user">Affréteur</label>
          <input
            id="affreteur_user"
            placeholder="Nom de l'affréteur"
            maxlength="255"
            class="navire-armateur"
            data-nom="Affréteur"
            required
          />
          <input hidden id="affreteur_value" required />
        </div>

        <!-- Armateur -->
        <div class="pure-control-group">
          <label for="armateur_user">Armateur</label>
          <input
            id="armateur_user"
            placeholder="Nom de l'armateur"
            maxlength="255"
            class="navire-armateur"
            data-nom="Armateur"
          />
          <input hidden id="armateur_value" />
        </div>

        <!-- Courtier -->
        <div class="pure-control-group">
          <label for="courtier_user">Courtier</label>
          <input
            id="courtier_user"
            placeholder="Nom du courtier"
            maxlength="255"
            class="navire-armateur"
            data-nom="Courtier"
          />
          <input hidden id="courtier_value" />
        </div>

        <!-- Laycan -->
        <div class="pure-control-group">
          <label for="lc_debut">L/C début</label>
          <input
            type="date"
            name="lc_debut"
            id="lc_debut"
            placeholder="L/C début"
            data-nom="Début laycan"
          />
        </div>
        <div class="pure-control-group">
          <label for="lc_fin">L/C fin</label>
          <input
            type="date"
            name="lc_fin"
            id="lc_fin"
            placeholder="L/C fin"
            data-nom="Fin laycan"
          />
        </div>

        <!-- C/P -->
        <div class="pure-control-group">
          <label for="cp_date">C/P</label>
          <input
            type="date"
            name="cp_date"
            id="cp_date"
            placeholder="Date C/P"
            data-nom="Date C/P"
          />
        </div>

        <!-- Montants -->
        <div class="pure-control-group">
          <label for="fret_achat">Fret (achat)</label>
          <input
            name="fret_achat"
            id="fret_achat"
            class="montant"
            placeholder="Fret (achat)"
            data-decimal="2"
            data-nom="Fret (achat)"
          />
        </div>
        <div class="pure-control-group">
          <label for="fret_vente">Fret (vente)</label>
          <input
            name="fret_vente"
            id="fret_vente"
            class="montant"
            placeholder="Fret (vente)"
            data-decimal="2"
            data-nom="Fret (vente)"
          />
        </div>
        <div class="pure-control-group">
          <label for="surestaries_achat">Surestaries (achat)</label>
          <input
            name="surestaries_achat"
            id="surestaries_achat"
            class="montant"
            placeholder="Surestaries (achat)"
            data-decimal="2"
            data-nom="Surestaries (achat)"
          />
        </div>
        <div class="pure-control-group">
          <label for="surestaries_vente">Surestaries (vente)</label>
          <input
            name="surestaries_vente"
            id="surestaries_vente"
            class="montant"
            placeholder="Surestaries (vente)"
            data-decimal="2"
            data-nom="Surestaries (vente)"
          />
        </div>

        <!-- Commentaire -->
        <div class="pure-control-group">
          <label for="commentaire">Commentaire</label>
          <textarea
            class="charter_commentaire"
            name="commentaire"
            id="commentaire"
            rows="3"
            cols="30"
            data-nom="Commentaire (général)"
          ></textarea>
        </div>

        <!-- Détails -->
        <h2>Détails</h2>
        <div id="ajouter-ligne">
          Ajouter une ligne
          <i class="material-icons" title="Ajouter une ligne">add</i>
        </div>
        <div>
          <ul id="details"></ul>
        </div>

        <!-- Validation/Annulation/Suppression -->
        <div id="boutonsAMS">
          <div class="boutons">
            <!-- Bouton "Ajouter" si nouveau -->
            <button class="pure-button bouton bouton-ajouter">Ajouter</button>
            <!-- Bouton "Modifier" si modidification -->
            <button class="pure-button bouton bouton-modifier">Modifier</button>
            <!-- Bouton "Supprimer" si suppression -->
            <button class="pure-button bouton bouton-supprimer">
              Supprimer
            </button>
            <!-- Bouton "Annuler" -->
            <button class="pure-button bouton bouton-annuler">Annuler</button>
          </div>
        </div>
      </form>
    </main>

    <datalist id="marchandises_list">
      <!-- TODO A remplacer par Awesomplete avec appel API chartering_detail -->
      <option value="Ammonitrate"></option>
      <option value="Bois"></option>
      <option value="Bois (léger)"></option>
      <option value="Bois (mixte)"></option>
      <option value="Bois (lourd)"></option>
      <option value="Bois (LVL)"></option>
      <option value="Blé bio"></option>
      <option value="Chlorure de potasse"></option>
      <option value="Citrus"></option>
      <option value="CSR (balles)"></option>
      <option value="DAP"></option>
      <option value="Drêches de maïs"></option>
      <option value="Engrais vrac"></option>
      <option value="Entec"></option>
      <option value="Maerl"></option>
      <option value="Magnésie"></option>
      <option value="Magnésie K"></option>
      <option value="Magnésie KS"></option>
      <option value="Magnésie P"></option>
      <option value="MCP BB"></option>
      <option value="MCP vrac"></option>
      <option value="MCP vrac mini"></option>
      <option value="MCP vrac semoule"></option>
      <option value="Poids bio"></option>
      <option value="Sel"></option>
      <option value="Sel (fin)"></option>
      <option value="Sel (gros)"></option>
      <option value="Sulfate de potasse"></option>
      <option value="Tourteaux de colza"></option>
      <option value="Tourteaux de tournesol"></option>
      <option value="Triticale de blé bio"></option>
      <option value="Urée"></option>
      <option value="Woodchips"></option>
    </datalist>

    <template id="ligne-detail">
      <li class="ligne-detail pure-g">
        <input hidden class="id" />
        <div class="bloc pure-u-1 pure-u-lg-7-24">
          <!-- Marchandise -->
          <div class="pure-control-group">
            <label
              >Marchandise*
              <input
                list="marchandises_list"
                class="marchandise"
                maxlength="255"
                data-nom="Marchandise"
                required
              />
            </label>
          </div>
          <div class="pure-u-1 pure-u-lg-12-24">
            <!-- Quantité -->
            <div class="pure-control-group">
              <label
                >Quantité
                <input class="quantite" maxlength="255" data-nom="Quantité" />
              </label>
            </div>
          </div>
          <div class="pure-u-1 pure-u-lg-11-24">
            <!-- Date B/L -->
            <div class="pure-control-group">
              <label
                >Date B/L
                <input
                  type="date"
                  class="bl_date"
                  maxlength="255"
                  data-nom="Date B/L"
                />
              </label>
            </div>
          </div>
        </div>

        <div class="bloc pure-u-1 pure-u-lg-7-24">
          <!-- Port de chargement -->
          <div class="pure-control-group">
            <label
              >Port de chargement*
              <input
                class="pol_user"
                placeholder="Port de chargement"
                data-nom="Port de chargement"
                required
              />
            </label>
            <input hidden class="pol_value" required />
          </div>
          <!-- Port de déchargement -->
          <div class="pure-control-group">
            <label
              >Port de déchargement*
              <input
                class="pod_user"
                placeholder="Port de déchargement"
                data-nom="Port de déchargement"
                required
              />
            </label>
            <input hidden class="pod_value" required />
          </div>
        </div>

        <div class="bloc pure-u-1 pure-u-lg-7-24">
          <!-- Commentaire -->
          <div class="pure-control-group">
            <label
              >Commentaire
              <textarea class="commentaire" rows="3" cols="30"></textarea>
            </label>
          </div>
        </div>

        <div class="poubelle">
          <a title="Supprimer la ligne"><i class="material-icons">delete</i></a>
        </div>
      </li>
    </template>
  </body>
</html>
